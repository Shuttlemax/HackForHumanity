<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMERGENCY REQUEST SYSTEM</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar__container">
          <a href="Interface.html" id="navbar__logo">CARGO DROP</a>
            <div class="navbar__toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar__menu">
                <li class="navbar__item">
                    <a href="Interface.html" class="navbar__links"> Home</a>
                </li>
                <li class="navbar__item">
                    <a href="zipcode.html" class="navbar__links"> Zipcode</a>
                </li>
                <li class="navbar__item">
                    <a href="/admin/admin_sign_in.html" class="navbar__links"> Admin</a>
                </li>
                <li class="navbar__btn">
                    <a href="Req.html" class="button"> Request
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class = "zips">
      <h1>
        Enter your zip code below to see where and when resources will be dropped in your local area:
      </h1>
    </div>
    <div class = "Sub">
      <label>
        Enter your zipcode
        <input id="zipcode" name="zipcode" placeholder="enter zipcode here">
      </label>   

      <div onclick = "sender()">
        
            <input type="submit" value="Submit">
        
      </div>

      <p id = "para">
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        
        <p id = "request">

        </p>
        <script>
            let response = fetch("http://localhost:8000/Request/",
                {
                method: 'GET',
                mode: 'cors',
                headers: {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin':'*'
                    },
            }).then(response => response.json())
            .then(data => {
                console.log(data)
                //document.getElementById("request").innerHTML = data[document.getElementById("zipcode").value];
                var zip = document.getElementById("zipcode").value;
                for(const dic in data)
                {
                  if(dic[zip])
                  {
                    document.getElementById("request").innerHTML = data[];
                    console.log(dic)
                    break;
                  }
                  console.log('nope:'+ dic)
                }
                // console.log(data)
                // var txt = ""
                // for (const [zip, dict] of Object.entries(data)){
                //     txt+= `${zip}:    `
                //     for (const [key, value] of Object.entries(dict)) {
                //             txt +=`${key}:   ${value}\n`
                //     }
                // }
                // console.log(txt)
                // console.log("tits")
                // //JSON.stringify(data)
                // document.getElementById("requestdata").innerHTML = txt;
            });
    
    
        
        </script>
        <br>
      </p>
      <script src="zipc.js"></script>
    </div>
</body>
</html>